<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>test file uploader</title>
    <script src="../../jquery/jquery-1.11.1.js" type="text/javascript"></script>
    <script src="../../library/pluginmanager/pluginmanager.js" type="text/javascript"></script>
    <script src="fileuploader.js" type="text/javascript"></script>
</head>
<body>
    <div id="div1">
    </div>
    <input id="button1" type="button" value="pick" />
    <input id="text1" type="text" />
    <input id="button2" type="button" value="upload" />
    <script>
        $(function () {
            $('#div1').fileUploader('init');

            $('#button1').click(function () {
                $('#div1').fileUploader('pick', {
                    success: function (filePath) {
                        var regexp = /^.*\\(.*?)$/,
                        match = regexp.exec(filePath),
                        fileName = match[1];

                        $('#text1').val(fileName);
                    }
                });
            });

            //server-sice interface
            //[HttpPost]
            //public ActionResult Upload(HttpPostedFileBase file)
            $('#button2').click(function () {
                $('#div1').fileUploader('upload', {
                    url: '/Test/Upload',
                    success: function (r) {
                        if (!r.status) {
                            alert(r.content);
                            return;
                        }

                        alert(r.content);
                    }
                });
            });
        });
    </script>
</body>
</html>
